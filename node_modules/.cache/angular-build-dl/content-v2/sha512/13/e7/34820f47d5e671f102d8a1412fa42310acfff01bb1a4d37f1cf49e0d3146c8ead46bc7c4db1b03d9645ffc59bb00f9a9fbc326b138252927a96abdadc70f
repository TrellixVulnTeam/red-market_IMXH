{"version":3,"sources":["webpack:///src/app/pages/chat-detail/chat-detail.page.ts","webpack:///src/app/pages/chat-detail/chat-detail.page.html","webpack:///src/app/pages/chat-detail/chat-detail-routing.module.ts","webpack:///src/app/pages/chat-detail/chat-detail.module.ts"],"names":["ChatDetailPage","chatService","router","route","fb","afAuth","currentUser","item","chatid","showAgeFilter","optionItems","active","Object","price","snapshot","paramMap","get","img","id","saler","console","log","JSON","stringify","msgForm","group","required","getCurrentUser","subscribe","user","getMsgs","uid","result","msgList","sendMsg","value","reset","routes","path","component","ChatDetailPageRoutingModule","forChild","ChatDetailPageModule","forRoot","relativeTimeThresholdOptions"],"mappings":"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","file":"default~chat-detail-chat-detail-module~pages-chat-detail-chat-detail-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { ChatService } from './chat-service';\nimport { forkJoin } from 'rxjs';\nimport { from } from 'rxjs/internal/observable/from';\nimport firebase from 'firebase';\n\n@Component({\n  selector: 'app-chat-detail',\n  templateUrl: './chat-detail.page.html',\n  styleUrls: ['./chat-detail.page.scss'],\n})\nexport class ChatDetailPage implements OnInit {\n\n  msgList: any[];\n  chat:Observable<any>;\n  rangeForm: FormGroup;\n  searchQuery: string;\n  msgForm : FormGroup;\n  currentUser = null;\n  item =null;\n  chatid = null;\n  showAgeFilter = false;\n  optionItems = [ {active:false},];\n  constructor(\n    private chatService : ChatService,\n    private router :Router,\n    private route :ActivatedRoute,\n    private fb:FormBuilder,\n    private afAuth: AngularFireAuth,\n  ) { }\n\n   ngOnInit() {\n    this.item = new Object();\n    this.item.price = this.route.snapshot.paramMap.get('price');\n    this.item.img = this.route.snapshot.paramMap.get('itemImg');\n    this.item.id = this.route.snapshot.paramMap.get('id');\n    this.item.saler = this.route.snapshot.paramMap.get('saler');\n    this.chatid = this.route.snapshot.paramMap.get('chatId');\n    \n    console.log('item from router +++++++ '+JSON.stringify(this.item));\n    this.msgForm = this.fb.group({\n      'txtMsg': [\"\", Validators.required],\n    });\n    this.chatService.getCurrentUser().subscribe(user=>{\n      console.log('CURRRRRRENT USER ************'+JSON.stringify( user))\n      this.currentUser = user;\n       this.chatService.getMsgs(this.item,user.uid).subscribe(result=>{\n         this.msgList = result[0]['msgs'];\n         console.log('MSG LIST '+JSON.stringify(this.msgList));\n       });\n    });\n\n  }\n\n\n\n  addMsg() {\n    console.log(\"submited form \");\n    this.chatService.sendMsg( this.item, this.msgForm.value,this.item.saler,this.currentUser ,this.chatid);\n    this.msgForm.reset();\n    //this.resize();\n    //this.scrollToBottomOnInit();\n  }\n\n\n  toggleClass(item){\n    item.active = !item.active;\n  }\n}\n","<ion-header [translucent]=\"true\" class=\"ion-no-border\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"/redmarket/chat\" mode=\"md\">\n      </ion-back-button>\n    </ion-buttons>\n    <ion-title >Messages</ion-title>\n  </ion-toolbar>\n<ion-toolbar>\n  <ion-row>\n    <ion-col class=\"ion-img-col\">\n      <ion-avatar>\n        <img\n          src=\"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y\"\n        />\n      </ion-avatar>\n    </ion-col>\n    <ion-col size=\"6\">\n      <div class=\"profile\">\n        <div>\n          <h4>Kedirosa Moha</h4>\n        </div>\n        <div class=\"joined\">Joind Mar 2020</div>\n        <div class=\"address\">Richardson TX</div>\n        <div class=\"rating\">* * * * *</div>\n      </div>\n    </ion-col>\n    <ion-col class=\"ion-img-col\">\n      <ion-avatar>\n        <img\n          [src]=\"item?.img\"\n        />\n      </ion-avatar>\n\t  <p>$ {{item?.price}}</p>\n    </ion-col>\n  </ion-row>\n</ion-toolbar>\n</ion-header>\n\n<ion-content fullscreen>\n\n\t<div class=\"chat-list\">\n\t<div class=\"chat_container d-flex\"*ngFor=\"let msg of msgList\" >\n\t\t<!-- <div class=\"chat_box d-flex received\">\n\t\t\t<div class=\"chat\">\n                <h2><span>Hey Samanth !</span></h2>\n\t\t\t\t<p>11:48 am</p>\n\t\t\t</div>\n\t\t</div> -->\n\t\t<div class=\"chat_box d-flex send\" *ngIf=\"msg?.sender==currentUser.uid\">\n\t\t\t<div class=\"chat\">\n                <h2><span>{{msg?.txt}}</span></h2>\n\t\t\t\t<p>{{msg?.created?.seconds *1000 | amTimeAgo}} <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"chat_box d-flex received\" *ngIf=\"msg?.sender!=currentUser.uid\">\n\t\t\t<div class=\"chat\">\n                <h2><span>{{msg?.txt}}</span></h2>\n\t\t\t\t<p>{{msg?.created?.seconds *1000 | amTimeAgo}}</p>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- <div class=\"chat_box d-flex send\">\n\t\t\t<div class=\"chat\">\n\t\t\t\t<h2>Sure ,just a second </h2>\n\t\t\t\t<p>11:49 am <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"chat_box d-flex send\">\n\t\t\t<div class=\"chat\">\n          <h2>is the item still available ?\n            I want to offer you $200 </h2>\n\t\n\t\t\t\t<p>11:49 am <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div> -->\n\t</div>\n</div>\n</ion-content>\n\n \n<ion-footer *ngFor=\"let item of optionItems\" [ngClass]=\"{'active': item.active}\">\n    <ion-toolbar>\n\t\t<form [formGroup]=\"msgForm\">\n\t<div class=\"form\">\n\t\t<ion-list lines=\"none\" class=\"d-flex\">\n      <ion-icon name=\"add-circle-outline\" (click)=\"toggleClass(item)\"></ion-icon>\n\t\t\t<ion-item lines=\"none\">\n\t\t\t\t<ion-textarea formControlName=\"txtMsg\" type=\"text\" placeholder=\"Type your message\"></ion-textarea>\n\t\t\t</ion-item>\n\t\t\t<h3 class=\"end\">\n        <ion-button (click)=\"addMsg()\"fill=\"clear\"> <ion-icon slot=\"icon-only\" name=\"send-outline\"></ion-icon></ion-button>\n\t\t\t</h3>\n\t\t</ion-list>\n\t</div>\n</form>\n\t<div class=\"option\">\n\t\t<ion-row>\n\t\t\t<ion-col size=\"3\">\n\t\t\t\t<ion-icon name=\"camera-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Camera</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n        <ion-icon name=\"images-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Gallery</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n        <ion-icon name=\"person-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Contact</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n\t\t\t\t<ion-icon name=\"location-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Location</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n        <ion-icon name=\"document-text-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Document</h6>\n\t\t\t</ion-col>\n\t\t</ion-row>\n\t</div>\n</ion-toolbar>\n</ion-footer> \n\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatDetailPage } from './chat-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatDetailPageRoutingModule } from './chat-detail-routing.module';\nimport { MomentModule } from 'ngx-moment';\nimport { ChatDetailPage } from './chat-detail.page';\nimport { ItemService } from '../../Services/account/item-service';\nimport { ChatService } from './chat-service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    ChatDetailPageRoutingModule,\n    MomentModule.forRoot({\n      relativeTimeThresholdOptions: {\n        'm': 59\n      }\n    }),\n  ],\n  declarations: [ChatDetailPage],\n  providers:[ItemService,ChatService]\n})\nexport class ChatDetailPageModule {}\n"]}