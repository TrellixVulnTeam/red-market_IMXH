{"version":3,"sources":["webpack:///src/app/pages/chat-detail/chat-detail.page.ts","webpack:///src/app/pages/chat-detail/chat-detail.page.html","webpack:///src/app/pages/chat-detail/chat-detail-routing.module.ts","webpack:///src/app/pages/chat-detail/chat-detail.module.ts"],"names":["ChatDetailPage","chatService","router","route","fb","afAuth","currentUser","routedFromChatList","item","user","chatid","showAgeFilter","optionItems","active","Object","price","snapshot","paramMap","get","img","id","poster","JSON","parse","console","log","stringify","msgForm","group","required","getCurrentUser","subscribe","chatListGetMsgs","result","msgList","getMsgs","uid","sendMsg","value","reset","routes","path","component","ChatDetailPageRoutingModule","forChild","ChatDetailPageModule","forRoot","relativeTimeThresholdOptions"],"mappings":";;;;;;;;;;;;;;;;;;;;AACA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;AC6CE;;AACC;;AACa;;AAAI;;AAAM;;AAAY;;AAAO;;AACzC;;AAAG;;;;AAA4C;;AAC/C;;AACD;;AACD;;;;;;AAJwB;;AAAA;;AACnB;;AAAA;;;;;;AAIL;;AACC;;AACa;;AAAI;;AAAM;;AAAY;;AAAO;;AACzC;;AAAG;;;;AAA2C;;AAC/C;;AACD;;;;;;AAHwB;;AAAA;;AACnB;;AAAA;;;;;;AAjBN;;AAOC;;AAOA;;AAwBD;;;;;;;;AA/BoC;;AAAA;;AAOI;;AAAA;;;;;;;;;;;;;;AA6BzC;;AACI;;AACF;;AACD;;AACC;;AACI;;AAAoC;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4B;;AACnE;;AACC;;AACD;;AACA;;AACK;;AAAY;AAAA;;AAAA;;AAAA;AAAA;;AAAgC;;AAA0D;;AAC3G;;AACD;;AACD;;AACD;;AACC;;AACC;;AACC;;AACC;;AACA;;AAA4B;;AAAM;;AACnC;;AACA;;AACK;;AACJ;;AAA4B;;AAAO;;AACpC;;AACA;;AACK;;AACJ;;AAA4B;;AAAO;;AACpC;;AACA;;AACC;;AACA;;AAA4B;;AAAQ;;AACrC;;AACA;;AACK;;AACJ;;AAA4B;;AAAQ;;AACrC;;AACD;;AACD;;AACD;;AACA;;;;;;;;AAxC6C;;AAErC;;AAAA;;;;UDrEKA,c;AAcX,gCACUC,WADV,EAEUC,MAFV,EAGUC,KAHV,EAIUC,EAJV,EAKUC,MALV,EAKiC;AAAA;;AAJvB,eAAAJ,WAAA,GAAAA,WAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,KAAA,GAAAA,KAAA;AACA,eAAAC,EAAA,GAAAA,EAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AAZV,eAAAC,WAAA,GAAc,IAAd;AACA,eAAAC,kBAAA,GAAoB,IAApB;AACA,eAAAC,IAAA,GAAM,IAAN;AACA,eAAAC,IAAA,GAAO,IAAP;AACA,eAAAC,MAAA,GAAS,IAAT;AACA,eAAAC,aAAA,GAAgB,KAAhB;AACA,eAAAC,WAAA,GAAc,CAAE;AAACC,kBAAM,EAAC;AAAR,WAAF,CAAd;AAOK;;;;iBAEJ,oBAAW;AAAA;;AACV,iBAAKL,IAAL,GAAY,IAAIM,MAAJ,EAAZ;AACA,iBAAKN,IAAL,CAAUO,KAAV,GAAkB,KAAKZ,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,OAAjC,CAAlB;AACA,iBAAKV,IAAL,CAAUW,GAAV,GAAgB,KAAKhB,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,SAAjC,CAAhB;AACA,iBAAKV,IAAL,CAAUY,EAAV,GAAe,KAAKjB,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,IAAjC,CAAf;AACA,iBAAKV,IAAL,CAAUa,MAAV,GAAoBC,IAAI,CAACC,KAAL,CAAW,KAAKpB,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,OAAjC,CAAX,CAApB;AACA,iBAAKR,MAAL,GAAc,KAAKP,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,QAAjC,CAAd;AACA,iBAAKX,kBAAL,GAA0B,KAAKJ,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,oBAAjC,CAA1B;AACAM,mBAAO,CAACC,GAAR,CAAc,iBAAe,KAAKlB,kBAApB,GAAwC,mCAAxC,GAA4Ee,IAAI,CAACI,SAAL,CAAe,KAAKlB,IAApB,CAA1F;AAEA,iBAAKmB,OAAL,GAAe,KAAKvB,EAAL,CAAQwB,KAAR,CAAc;AAC3B,wBAAU,CAAC,EAAD,EAAK,0DAAWC,QAAhB;AADiB,aAAd,CAAf;;AAID,gBAAG,QAAM,KAAKtB,kBAAd,EAAiC;AAEhCiB,qBAAO,CAACC,GAAR,CAAY,mEAAiEH,IAAI,CAACC,KAAL,CAAW,KAAKpB,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,MAAjC,CAAX,CAA7E;AACA,mBAAKV,IAAL,GAAYc,IAAI,CAACC,KAAL,CAAW,KAAKpB,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,MAAjC,CAAX,CAAZ;AACA,mBAAKR,MAAL,GAAc,KAAKP,KAAL,CAAWa,QAAX,CAAoBC,QAApB,CAA6BC,GAA7B,CAAiC,QAAjC,CAAd;AACA,mBAAKjB,WAAL,CAAiB6B,cAAjB,GAAkCC,SAAlC,CAA4C,UAAAtB,IAAI,EAAE;AAChDe,uBAAO,CAACC,GAAR,CAAY,kCAAgCH,IAAI,CAACI,SAAL,CAAgBjB,IAAhB,CAA5C;AACA,qBAAI,CAACH,WAAL,GAAmBG,IAAnB;;AACC,qBAAI,CAACR,WAAL,CAAiB+B,eAAjB,CAAiC,KAAI,CAACtB,MAAtC,EAA8CqB,SAA9C,CAAwD,UAAAE,MAAM,EAAE;AAC9D,uBAAI,CAACC,OAAL,GAAeD,MAAM,CAAC,CAAD,CAAN,CAAU,MAAV,CAAf;AACAT,yBAAO,CAACC,GAAR,CAAY,qCAAmCH,IAAI,CAACI,SAAL,CAAe,KAAI,CAACQ,OAApB,CAA/C;AACD,iBAHD;AAIF,eAPD;AAQA,aAbD,MAaK;AAEJV,qBAAO,CAACC,GAAR,CAAY,sEAAZ;AACA,mBAAKxB,WAAL,CAAiB6B,cAAjB,GAAkCC,SAAlC,CAA4C,UAAAtB,IAAI,EAAE;AAChDe,uBAAO,CAACC,GAAR,CAAY,kCAAgCH,IAAI,CAACI,SAAL,CAAgBjB,IAAhB,CAA5C;AACA,qBAAI,CAACH,WAAL,GAAmBG,IAAnB;;AACC,qBAAI,CAACR,WAAL,CAAiBkC,OAAjB,CAAyB,KAAI,CAAC3B,IAA9B,EAAmCC,IAAI,CAAC2B,GAAxC,EAA6CL,SAA7C,CAAuD,UAAAE,MAAM,EAAE;AAC7D,uBAAI,CAACC,OAAL,GAAeD,MAAM,CAAC,CAAD,CAAN,CAAU,MAAV,CAAf;AACAT,yBAAO,CAACC,GAAR,CAAY,qCAAmCH,IAAI,CAACI,SAAL,CAAe,KAAI,CAACQ,OAApB,CAA/C;AACD,iBAHD;AAIF,eAPD;AASA;AAKD;;;iBAID,kBAAS;AACPV,mBAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,iBAAKxB,WAAL,CAAiBoC,OAAjB,CAA0B,KAAK7B,IAA/B,EAAqC,KAAKmB,OAAL,CAAaW,KAAlD,EAAwD,KAAK9B,IAAL,CAAUa,MAAlE,EAAyE,KAAKf,WAA9E,EAA2F,KAAKI,MAAhG;AACA,iBAAKiB,OAAL,CAAaY,KAAb,GAHO,CAIP;AACA;AACD;;;iBAGD,qBAAY/B,IAAZ,EAAgB;AACdA,gBAAI,CAACK,MAAL,GAAc,CAACL,IAAI,CAACK,MAApB;AACD;;;;;;;yBAjFUb,c,EAAc,0H,EAAA,uH,EAAA,+H,EAAA,2H,EAAA,mI;AAAA,O;;;cAAdA,c;AAAc,wC;AAAA,iB;AAAA,e;AAAA,quC;AAAA;AAAA;ACf3B;;AACE;;AACE;;AACE;;AAEF;;AACA;;AAAY;;AAAQ;;AACtB;;AACF;;AACE;;AACE;;AACE;;AACE;;AAGF;;AACF;;AACA;;AACE;;AACI;;AAAI;;AAAqB;;AACzB;;AAAG;;AAAc;;AACvB;;AAAG;;AAAa;;AACZ;;AAAoB;;AAAS;;AAC/B;;AACF;;AACA;;AAEI;;AAGL;;AACC;;AACF;;AACF;;AACA;;AAEA;;AAEC;;AACA;;AAuCD;;AACA;;AAGA;;;;AAlFY;;AAaF;;AAAA;;AAMI;;AAAA;;AASJ;;AAAA;;AAEP;;AAAA;;AASgD;;AAAA;;AA2CtB;;AAAA;;;;;;;;;;;;;;;;;;;;;;ACjF7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIA,UAAMwC,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,2B;;;;;cAAAA;;;;2BAAAA,2B;AAA2B,S;AAAA,kBAH7B,CAAC,6DAAaC,QAAb,CAAsBJ,MAAtB,CAAD,CAG6B,EAF5B,4DAE4B;;;;4HAA3BG,2B,EAA2B;AAAA;AAAA,oBAF5B,4DAE4B;AAAA,S;AAFhB,O;;;;;;;;;;;;;;;;;ACbxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UA2BaE,oB;;;;;cAAAA;;;;2BAAAA,oB;AAAoB,S;AAAA,mBAFrB,CAAC,0EAAD,EAAa,yDAAb,C;AAAyB,kBAb1B,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,kEAJO,EAKP,uFALO,EAMP,wDAAaC,OAAb,CAAqB;AACnBC,sCAA4B,EAAE;AAC5B,iBAAK;AADuB;AADX,SAArB,CANO,CAa0B;;;;4HAExBF,oB,EAAoB;AAAA,yBAHhB,gEAGgB;AAHF,oBAX3B,4DAW2B,EAV3B,0DAU2B,EAT3B,0DAS2B,EAR3B,kEAQ2B,EAP3B,uFAO2B,EAPA,uDAOA;AAGE,S;AAVF,O","file":"default~chat-detail-chat-detail-module~pages-chat-detail-chat-detail-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { ChatService } from './chat-service';\nimport { forkJoin } from 'rxjs';\nimport { from } from 'rxjs/internal/observable/from';\nimport firebase from 'firebase';\n\n@Component({\n  selector: 'app-chat-detail',\n  templateUrl: './chat-detail.page.html',\n  styleUrls: ['./chat-detail.page.scss'],\n})\nexport class ChatDetailPage implements OnInit {\n\n  msgList: any[];\n  chat:Observable<any>;\n  rangeForm: FormGroup;\n  searchQuery: string;\n  msgForm : FormGroup;\n  currentUser = null;\n  routedFromChatList= null;\n  item =null;\n  user = null;\n  chatid = null;\n  showAgeFilter = false;\n  optionItems = [ {active:false},];\n  constructor(\n    private chatService : ChatService,\n    private router :Router,\n    private route :ActivatedRoute,\n    private fb:FormBuilder,\n    private afAuth: AngularFireAuth,\n  ) { }\n\n   ngOnInit() {\n    this.item = new Object();\n    this.item.price = this.route.snapshot.paramMap.get('price');\n    this.item.img = this.route.snapshot.paramMap.get('itemImg');\n    this.item.id = this.route.snapshot.paramMap.get('id');\n    this.item.poster =  JSON.parse(this.route.snapshot.paramMap.get('saler'));\n    this.chatid = this.route.snapshot.paramMap.get('chatId');\n    this.routedFromChatList = this.route.snapshot.paramMap.get('routedFromChatList');\n    console.log(  'routed from '+this.routedFromChatList +'    and item from router +++++++ '+JSON.stringify(this.item));\n\n    this.msgForm = this.fb.group({\n      'txtMsg': [\"\", Validators.required],\n    });\n\n   if(null!=this.routedFromChatList){\n\n    console.log('FROM CHAT LIST _______________________________________________'+JSON.parse(this.route.snapshot.paramMap.get('item')))\n    this.item = JSON.parse(this.route.snapshot.paramMap.get('item'));\n    this.chatid = this.route.snapshot.paramMap.get('chatId');\n    this.chatService.getCurrentUser().subscribe(user=>{\n      console.log('CURRRRRRENT USER ************'+JSON.stringify( user))\n      this.currentUser = user;\n       this.chatService.chatListGetMsgs(this.chatid).subscribe(result=>{\n         this.msgList = result[0]['msgs'];\n         console.log('MSG LIST from this user and item'+JSON.stringify(this.msgList));\n       });\n    });\n   }else{\n\n    console.log('FROM ITEM DETAIL PAGE_______________________________________________')\n    this.chatService.getCurrentUser().subscribe(user=>{\n      console.log('CURRRRRRENT USER ************'+JSON.stringify( user))\n      this.currentUser = user;\n       this.chatService.getMsgs(this.item,user.uid).subscribe(result=>{\n         this.msgList = result[0]['msgs'];\n         console.log('MSG LIST from this user and item'+JSON.stringify(this.msgList));\n       });\n    });\n\n   }\n\n\n\n\n  }\n\n\n\n  addMsg() {\n    console.log(\"submited form \");\n    this.chatService.sendMsg( this.item, this.msgForm.value,this.item.poster,this.currentUser ,this.chatid);\n    this.msgForm.reset();\n    //this.resize();\n    //this.scrollToBottomOnInit();\n  }\n\n\n  toggleClass(item){\n    item.active = !item.active;\n  }\n}\n","<ion-header [translucent]=\"true\" class=\"ion-no-border\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"/redmarket/chat\" mode=\"md\">\n      </ion-back-button>\n    </ion-buttons>\n    <ion-title >Messages</ion-title>\n  </ion-toolbar>\n<ion-toolbar>\n  <ion-row>\n    <ion-col size=\"2.5\" class=\"ion-img-col\">\n      <ion-avatar>\n        <img\n          [src]=\"item?.poster.img\"\n        />\n      </ion-avatar>\n    </ion-col>\n    <ion-col>\n      <div class=\"profile\">\n          <h4>{{item?.poster.name}}</h4>\n          <p>Joind Mar 2020</p>\n\t\t  <p>Richardson TX</p>\n        <div class=\"rating\">* * * * *</div>\n      </div>\n    </ion-col>\n    <ion-col size=\"2.5\">\n\n        <img class=\"item-img\"\n          [src]=\"item?.img\"\n        />\n\t  $ {{item?.price}}\n    </ion-col>\n  </ion-row>\n</ion-toolbar>\n</ion-header>\n\n<ion-content fullscreen>\n\n\t<div class=\"chat-list\">\n\t<div class=\"chat_container d-flex\"*ngFor=\"let msg of msgList\" >\n\t\t<!-- <div class=\"chat_box d-flex received\">\n\t\t\t<div class=\"chat\">\n                <h2><span>Hey Samanth !</span></h2>\n\t\t\t\t<p>11:48 am</p>\n\t\t\t</div>\n\t\t</div> -->\n\t\t<div class=\"chat_box d-flex send\" *ngIf=\"msg?.sender.uid==currentUser.uid\">\n\t\t\t<div class=\"chat\">\n                <h2><span>{{msg?.txt}}</span></h2>\n\t\t\t\t<p>{{msg?.created?.seconds *1000 | amTimeAgo}} <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"chat_box d-flex received\" *ngIf=\"msg?.sender.uid!=currentUser.uid\">\n\t\t\t<div class=\"chat\">\n                <h2><span>{{msg?.txt}}</span></h2>\n\t\t\t\t<p>{{msg?.created?.seconds *1000 | amTimeAgo}}</p>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- <div class=\"chat_box d-flex send\">\n\t\t\t<div class=\"chat\">\n\t\t\t\t<h2>Sure ,just a second </h2>\n\t\t\t\t<p>11:49 am <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"chat_box d-flex send\">\n\t\t\t<div class=\"chat\">\n          <h2>is the item still available ?\n            I want to offer you $200 </h2>\n\t\n\t\t\t\t<p>11:49 am <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div> -->\n\t</div>\n</div>\n</ion-content>\n\n \n<ion-footer *ngFor=\"let item of optionItems\" [ngClass]=\"{'active': item.active}\">\n    <ion-toolbar>\n\t\t<form [formGroup]=\"msgForm\">\n\t<div class=\"form\">\n\t\t<ion-list lines=\"none\" class=\"d-flex\">\n      <ion-icon name=\"add-circle-outline\" (click)=\"toggleClass(item)\"></ion-icon>\n\t\t\t<ion-item lines=\"none\">\n\t\t\t\t<ion-textarea formControlName=\"txtMsg\" type=\"text\" placeholder=\"Type your message\"></ion-textarea>\n\t\t\t</ion-item>\n\t\t\t<h3 class=\"end\">\n        <ion-button (click)=\"addMsg()\"fill=\"clear\"> <ion-icon slot=\"icon-only\" name=\"send-outline\"></ion-icon></ion-button>\n\t\t\t</h3>\n\t\t</ion-list>\n\t</div>\n</form>\n\t<div class=\"option\">\n\t\t<ion-row>\n\t\t\t<ion-col size=\"3\">\n\t\t\t\t<ion-icon name=\"camera-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Camera</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n        <ion-icon name=\"images-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Gallery</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n        <ion-icon name=\"person-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Contact</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n\t\t\t\t<ion-icon name=\"location-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Location</h6>\n\t\t\t</ion-col>\n\t\t\t<ion-col size=\"3\">\n        <ion-icon name=\"document-text-outline\" color=\"primary\"></ion-icon>\n\t\t\t\t<h6 class=\"ion-text-center\">Document</h6>\n\t\t\t</ion-col>\n\t\t</ion-row>\n\t</div>\n</ion-toolbar>\n</ion-footer> \n\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatDetailPage } from './chat-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatDetailPageRoutingModule } from './chat-detail-routing.module';\nimport { MomentModule } from 'ngx-moment';\nimport { ChatDetailPage } from './chat-detail.page';\nimport { ItemService } from '../../Services/account/item-service';\nimport { ChatService } from './chat-service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    ChatDetailPageRoutingModule,\n    MomentModule.forRoot({\n      relativeTimeThresholdOptions: {\n        'm': 59\n      }\n    }),\n  ],\n  declarations: [ChatDetailPage],\n  providers:[ItemService,ChatService]\n})\nexport class ChatDetailPageModule {}\n"]}